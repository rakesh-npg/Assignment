{"ast":null,"code":"import Vue from 'vue';\nimport axios from 'axios';\nimport VueAxios from 'vue-axios';\nVue.use(VueAxios, axios);\nexport default {\n  data() {\n    return {\n      formData: {\n        customerId: \"\",\n        customerName: \"\",\n        tableId: \"\"\n      },\n      flagData: {\n        editForm: false,\n        formFlag: false,\n        sortArrow: [false, false, false]\n      },\n      tableHeaders: [\"table_id\", \"customer_id\", \"customer_name\", \"count\", \"edit/delete\"],\n      tableData: []\n    };\n  },\n\n  mounted() {\n    this.read();\n  },\n\n  methods: {\n    async validateForm() {\n      this.$refs.form.validate();\n      console.log(this.formData);\n      await axios.post('http://127.0.0.1:3333/cust/create', this.formData).then(resposne => console.log(resposne));\n      this.flagData.formFlag = false;\n      this.read();\n      this.$refs.form.reset();\n    },\n\n    async read() {\n      await axios.get('http://127.0.0.1:3333/cust/read').then(response => {\n        console.log(response);\n        this.tableData = response.data;\n      });\n    },\n\n    async editForm() {\n      this.$refs.form.validate();\n      console.log('edition done');\n      await axios.post('http://127.0.0.1:3333/cust/update', this.formData).then(resposne => console.log(resposne));\n      this.$refs.form.reset();\n      this.flagData.formFlag = false;\n      this.flagData.editForm = false;\n      this.read();\n    },\n\n    async deleteData(data) {\n      console.log(data['table_id']);\n      await axios.delete(`http://127.0.0.1:3333/cust/delete/${data[\"table_id\"]}`);\n      this.read();\n    },\n\n    async sortData(i, head) {\n      let sortType = this.flagData.sortArrow[i] ? 'desc' : 'asc';\n      let tempData = {\n        sortType: sortType,\n        col: head\n      };\n      console.log(tempData);\n      await axios.post('http://127.0.0.1:3333/cust/sort', tempData).then(resposne => {\n        console.log(resposne);\n        this.tableData = resposne.data;\n      });\n      console.log('sortData', head, i);\n      console.log(this.flagData.sortArrow[i]);\n      this.flagData.sortArrow[i] = !this.flagData.sortArrow[i];\n    },\n\n    async searchFunc(data) {\n      console.log(data);\n      let tempData = {\n        searchVal: data\n      };\n      await axios.post('http://127.0.0.1:3333/cust/search', tempData).then(response => {\n        this.tableData = response.data;\n      });\n    },\n\n    editData(data) {\n      console.log('workinf');\n      console.log(data);\n      this.formData.customerId = data.customer_id;\n      this.formData.customerName = data.customer_name;\n      this.formData.tableId = data.table_id;\n      this.flagData.formFlag = true;\n      this.flagData.editForm = true;\n    },\n\n    sortIconFlagDisplay(flag) {\n      if (this.flagData.sortArrow[flag]) return 'mdi-arrow-down';else return 'mdi-arrow-up';\n    },\n\n    clickOut() {\n      this.$refs.form.reset();\n      this.flagData.editForm = false;\n      this.flagData.formFlag = false;\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}