{"ast":null,"code":"import Vue from 'vue';\nimport axios from 'axios';\nimport VueAxios from 'vue-axios';\nimport SearchBox from './SearchBox.vue';\nVue.use(VueAxios, axios);\nexport default {\n  data() {\n    return {\n      formData: {\n        id: \"\",\n        hotelName: \"\",\n        hotelDoorno: \"\",\n        hotelLandmark: \"\",\n        hotelPincode: \"\",\n        customerId: \"\"\n      },\n      flagData: {\n        editForm: false,\n        formFlag: false,\n        sortArrow: [false, false, false]\n      },\n      tableHeaders: [\"id\", \"hotel_name\", \"address\", \"customer_id\", \"customerName\", \"edit/delete\"],\n      tableData: []\n    };\n  },\n\n  mounted() {\n    this.read();\n  },\n\n  methods: {\n    async read() {\n      await axios.get('http://127.0.0.1:3333/hotel/read').then(response => {\n        console.log(response);\n        this.tableData = response.data;\n      });\n    },\n\n    async validateForm() {\n      this.$refs.form.validate();\n      console.log(\"vlaidation done\");\n      console.log(this.formData);\n      await axios.post('http://127.0.0.1:3333/hotel/create', this.formData).then(resposne => console.log(resposne));\n      this.$refs.form.reset();\n      this.flagData.formFlag = false;\n      this.read();\n    },\n\n    async editForm() {\n      this.$refs.form.validate();\n      console.log(\"edition done\");\n      await axios.post('http://127.0.0.1:3333/hotel/update', this.formData).then(resposne => console.log(resposne));\n      this.$refs.form.reset();\n      this.flagData.formFlag = false;\n      this.flagData.editForm = false;\n      this.read();\n    },\n\n    async sortData(i, head) {\n      let sortType = this.flagData.sortArrow[i] ? 'desc' : 'asc';\n      console.log(sortType, i, head);\n      let tempData = {\n        sortType: sortType,\n        col: head\n      };\n      console.log(tempData);\n      await axios.post('http://127.0.0.1:3333/hotel/sort', tempData).then(resposne => {\n        console.log(resposne);\n        this.tableData = resposne.data;\n      });\n      console.log(this.flagData.sortArrow[i]);\n      this.flagData.sortArrow[i] = !this.flagData.sortArrow[i];\n    },\n\n    async searchFunc(data) {\n      console.log(data);\n      let tempData = {\n        searchVal: data\n      };\n      await axios.post('http://127.0.0.1:3333/hotel/search', tempData).then(response => {\n        this.tableData = response.data;\n      });\n    },\n\n    async deleteData(data) {\n      await axios.delete(`http://127.0.0.1:3333/hotel/delete/${data[\"id\"]}`);\n      this.read();\n    },\n\n    editData(data) {\n      console.log(\"workinf\");\n      console.log(data);\n      this.formData.customerId = data.customer_id;\n      this.formData.id = data.id;\n      this.formData.hotelName = data.hotel_name;\n      this.formData.hotelDoorno = data.address.doorNo;\n      this.formData.hotelLandmark = data.address.landMark;\n      this.formData.hotelPincode = data.address.pincode;\n      this.flagData.formFlag = true;\n      this.flagData.editForm = true;\n    },\n\n    sortIconFlagDisplay(flag) {\n      if (this.flagData.sortArrow[flag]) return \"mdi-arrow-down\";else return \"mdi-arrow-up\";\n    },\n\n    clickOut() {\n      this.$refs.form.reset();\n      this.flagData.editForm = false;\n      this.flagData.formFlag = false;\n    }\n\n  },\n  components: {\n    SearchBox\n  }\n};","map":null,"metadata":{},"sourceType":"module"}