{"ast":null,"code":"import Vue from 'vue';\nimport axios from 'axios';\nimport VueAxios from 'vue-axios';\nimport SearchBox from './SearchBox.vue';\nVue.use(VueAxios, axios);\nexport default {\n  data() {\n    return {\n      formData: {\n        id: \"\",\n        hotelName: \"\",\n        hotelDoorno: \"\",\n        hotelLandmark: \"\",\n        hotelPincode: \"\",\n        customerId: \"\"\n      },\n      flagData: {\n        editForm: false,\n        formFlag: false,\n        sortArrow: [false, false, false]\n      },\n      tableHeaders: [\"id\", \"hotel_name\", \"address\", \"customer_id\", \"customerName\", \"edit/delete\"],\n      tableData: [],\n      appKeyHeader: {\n        headers: {\n          appkey: process.env.VUE_APP_KEY\n        }\n      }\n    };\n  },\n\n  mounted() {\n    this.read(); // console.log(process.env.VUE_APP_KEY)\n    // console.log('test')\n  },\n\n  methods: {\n    async read() {\n      await axios.get('http://127.0.0.1:3333/hotel/read', this.appKeyHeader).then(response => {\n        console.log(response);\n        this.tableData = response.data;\n      });\n    },\n\n    async validateForm() {\n      this.$refs.form.validate();\n      console.log(\"vlaidation done\");\n      console.log(this.formData);\n      await axios.post('http://127.0.0.1:3333/hotel/create', this.formData, this.appKeyHeader).then(resposne => console.log(resposne));\n      this.$refs.form.reset();\n      this.flagData.formFlag = false;\n      this.read();\n    },\n\n    async editForm() {\n      this.$refs.form.validate();\n      console.log(\"edition done\");\n      await axios.post('http://127.0.0.1:3333/hotel/update', this.formData, this.appKeyHeader).then(resposne => console.log(resposne));\n      this.$refs.form.reset();\n      this.flagData.formFlag = false;\n      this.flagData.editForm = false;\n      this.read();\n    },\n\n    async sortData(i, head) {\n      let sortType = this.flagData.sortArrow[i] ? 'desc' : 'asc';\n      console.log(sortType, i, head);\n      let tempData = {\n        sortType: sortType,\n        col: head\n      };\n      console.log(tempData);\n      await axios.post('http://127.0.0.1:3333/hotel/sort', tempData, this.appKeyHeader).then(resposne => {\n        console.log(resposne);\n        this.tableData = resposne.data;\n      });\n      console.log(this.flagData.sortArrow[i]);\n      this.flagData.sortArrow[i] = !this.flagData.sortArrow[i];\n    },\n\n    async searchFunc(data) {\n      console.log(data);\n      let tempData = {\n        searchVal: data\n      };\n      await axios.post('http://127.0.0.1:3333/hotel/search', tempData, this.appKeyHeader).then(response => {\n        this.tableData = response.data;\n      });\n    },\n\n    async deleteData(data) {\n      await axios.delete(`http://127.0.0.1:3333/hotel/delete/${data[\"id\"]}`, this.appKeyHeader);\n      this.read();\n    },\n\n    editData(data) {\n      console.log(\"workinf\");\n      console.log(data);\n      this.formData.customerId = data.customer_id;\n      this.formData.id = data.id;\n      this.formData.hotelName = data.hotel_name;\n      this.formData.hotelDoorno = data.address.doorNo;\n      this.formData.hotelLandmark = data.address.landMark;\n      this.formData.hotelPincode = data.address.pincode;\n      this.flagData.formFlag = true;\n      this.flagData.editForm = true;\n    },\n\n    sortIconFlagDisplay(flag) {\n      if (this.flagData.sortArrow[flag]) return \"mdi-arrow-down\";else return \"mdi-arrow-up\";\n    },\n\n    clickOut() {\n      this.$refs.form.reset();\n      this.flagData.editForm = false;\n      this.flagData.formFlag = false;\n    }\n\n  },\n  components: {\n    SearchBox\n  }\n};","map":{"version":3,"mappings":"AAgHA;AACA;AACA;AACA;AACAA;AAEA;EACAC;IACA;MACAC;QACAC,MADA;QAEAC,aAFA;QAGAC,eAHA;QAIAC,iBAJA;QAKAC,gBALA;QAMAC;MANA,CADA;MASAC;QACAC,eADA;QAEAC,eAFA;QAGAC;MAHA,CATA;MAcAC,2FAdA;MAeAC,aAfA;MAiBAC;QAAAC;UAAAC;QAAA;MAAA;IAjBA;EAmBA,CArBA;;EAsBAC;IACA,YADA,CAEA;IACA;EACA,CA1BA;;EA4BAC;IACA;MAEA,uEACAC,IADA,CACAC;QACAC;QACA;MAAA,CAHA;IAIA,CAPA;;IAUA;MACA;MACAA;MACAA;MACA,yFACAF,IADA,CACAG,iCADA;MAEA;MACA;MACA;IACA,CAnBA;;IAoBA;MACA;MACAD;MACA,yFACAF,IADA,CACAG,iCADA;MAEA;MACA;MACA;MACA;IACA,CA7BA;;IA8BA;MACA;MACAD;MACA;QACAE,kBADA;QAEAC;MAFA;MAIAH;MACA;QACAA;QACA;MACA,CAHA;MAIAA;MACA;IACA,CA5CA;;IA8CA;MACAA;MACA;QACAI;MADA;MAIA;QACA;MACA,CAFA;IAGA,CAvDA;;IAyDA;MACA;MACA;IACA,CA5DA;;IA8DAC;MACAL;MACAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA,CAzEA;;IA0EAM;MACA,mCACA,wBADA,KAGA;IACA,CA/EA;;IAgFAC;MACA;MACA;MACA;IACA;;EApFA,CA5BA;EAkHAC;IAAAC;EAAA;AAlHA","names":["Vue","data","formData","id","hotelName","hotelDoorno","hotelLandmark","hotelPincode","customerId","flagData","editForm","formFlag","sortArrow","tableHeaders","tableData","appKeyHeader","headers","appkey","mounted","methods","then","response","console","resposne","sortType","col","searchVal","editData","sortIconFlagDisplay","clickOut","components","SearchBox"],"sourceRoot":"src/components","sources":["HotelTable.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <SearchBox @searchEmitPop=\"searchFunc\"/>\r\n        <!-- <h1>{{process.env}}</h1> -->\r\n        <v-btn @click=\"(() => flagData.formFlag = true)\">New Entry</v-btn>\r\n\r\n        <v-simple-table>\r\n            <thead>\r\n                <tr>\r\n                   <th\r\n                   v-for=\"(head, i) in tableHeaders\" :key=\"head\">\r\n                   {{head}}\r\n                   <template v-if=\"head != 'edit/delete'\">\r\n                        <v-icon small @click=\"sortData(i, head)\">mdi-arrow-down</v-icon>\r\n                   </template>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr\r\n                v-for=\"data in tableData\" :key=\"data.id\">\r\n                    <td v-for=\"column in tableHeaders\" :key=\"column\">\r\n                    \r\n                    <template v-if=\"column != 'address'\">\r\n                        {{data[column]}}\r\n                    </template>\r\n\r\n                    <template v-if=\"column == 'edit/delete'\">\r\n                        <v-icon small @click=\"editData(data)\">mdi-pencil</v-icon>\r\n                        <v-icon small @click=\"deleteData(data)\">mdi-delete</v-icon>\r\n                    </template>\r\n\r\n                    <template v-if=\"column == 'address'\">\r\n                        DoorNo {{ data[column]['doorNo']}}\r\n                        Landmark {{ data[column]['landMark']}}\r\n                        pincode{{ data[column]['pincode']}}\r\n                    </template>\r\n                </td>\r\n                </tr>\r\n            </tbody>\r\n\r\n        </v-simple-table>\r\n\r\n        <v-dialog v-model=\"flagData.formFlag\" @click:outside=\"clickOut\">   \r\n            <v-card>\r\n                    <v-card-title class=\"text-h5 grey lighten-2\">\r\n                    New Entry \r\n                    </v-card-title>\r\n\r\n                        \r\n                    <v-form\r\n                    ref=\"form\"\r\n                    lazy-validation\r\n                    >\r\n\r\n                        <v-text-field\r\n                        v-model=\"formData.id\"\r\n                        label=\"ID\" v-if=\"flagData.editForm\">\r\n                        \r\n                        </v-text-field>\r\n                \r\n                        <v-text-field\r\n                        v-model=\"formData.hotelName\"\r\n                        label=\"Name\">\r\n                        \r\n                        </v-text-field>\r\n                \r\n                        <v-text-field\r\n                        v-model=\"formData.hotelDoorno\"\r\n                        label=\"Door No\">\r\n                        \r\n                        </v-text-field>\r\n            \r\n\r\n                        <v-text-field\r\n                        v-model=\"formData.hotelLandmark\"\r\n                        label=\"Landmark\">\r\n                        \r\n                        </v-text-field>\r\n                        \r\n                        <v-text-field \r\n                        v-model=\"formData.hotelPincode\"  \r\n                        label=\"pincode\"\r\n                        >\r\n                        </v-text-field>\r\n\r\n                        <v-text-field \r\n                        v-model=\"formData.customerId\"  \r\n                        label=\"customer ID\"\r\n                        >\r\n                        </v-text-field>\r\n\r\n                        <v-btn @click=\"validateForm\" v-if=\"!flagData.editForm\">\r\n                        Submit\r\n                        </v-btn>\r\n                        \r\n                        <v-btn @click=\"editForm\" v-if=\"flagData.editForm\">\r\n                        Edit\r\n                        </v-btn>\r\n\r\n                    </v-form>\r\n\r\n                </v-card>\r\n            </v-dialog> \r\n\r\n          \r\n        \r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport Vue from 'vue';\r\nimport axios from 'axios';\r\nimport VueAxios from 'vue-axios';\r\nimport SearchBox from './SearchBox.vue';\r\nVue.use(VueAxios, axios)\r\n\r\nexport default{\r\n    data() {\r\n        return {\r\n            formData: {\r\n                id: \"\",\r\n                hotelName: \"\",\r\n                hotelDoorno: \"\",\r\n                hotelLandmark: \"\",\r\n                hotelPincode: \"\",\r\n                customerId: \"\",\r\n            },\r\n            flagData: {\r\n                editForm: false,\r\n                formFlag: false,\r\n                sortArrow: [false, false, false],\r\n            },\r\n            tableHeaders: [\"id\",\"hotel_name\", \"address\", \"customer_id\",\"customerName\", \"edit/delete\"],\r\n            tableData: [\r\n            ], \r\n            appKeyHeader: {headers : {appkey : process.env.VUE_APP_KEY}}\r\n        };\r\n    },\r\n    mounted() {\r\n        this.read() \r\n        // console.log(process.env.VUE_APP_KEY)\r\n        // console.log('test')\r\n    },\r\n\r\n    methods: {\r\n        async read() {\r\n\r\n            await axios.get('http://127.0.0.1:3333/hotel/read', this.appKeyHeader )\r\n            .then((response) =>{\r\n            console.log(response)\r\n            this.tableData = response.data})\r\n        },\r\n        \r\n\r\n        async validateForm() {\r\n            this.$refs.form.validate();\r\n            console.log(\"vlaidation done\");\r\n            console.log(this.formData)\r\n            await axios.post('http://127.0.0.1:3333/hotel/create', this.formData, this.appKeyHeader)\r\n            .then((resposne) => console.log(resposne))\r\n            this.$refs.form.reset();\r\n            this.flagData.formFlag = false \r\n            this.read() \r\n        },\r\n        async editForm() {\r\n            this.$refs.form.validate();\r\n            console.log(\"edition done\");\r\n            await axios.post('http://127.0.0.1:3333/hotel/update', this.formData, this.appKeyHeader)\r\n            .then((resposne) => console.log(resposne))\r\n            this.$refs.form.reset();\r\n            this.flagData.formFlag = false;\r\n            this.flagData.editForm = false;\r\n            this.read() \r\n        },\r\n        async sortData(i, head) {\r\n            let sortType = this.flagData.sortArrow[i] ? 'desc' : 'asc'\r\n            console.log(sortType, i, head)\r\n            let tempData = {\r\n                sortType: sortType, \r\n                col: head\r\n            }   \r\n            console.log(tempData)\r\n            await axios.post('http://127.0.0.1:3333/hotel/sort', tempData, this.appKeyHeader).then((resposne) => {\r\n                console.log(resposne)\r\n                this.tableData = resposne.data \r\n            })\r\n            console.log(this.flagData.sortArrow[i]);\r\n            this.flagData.sortArrow[i] = !this.flagData.sortArrow[i];\r\n        },\r\n\r\n        async searchFunc(data){\r\n            console.log(data)\r\n            let tempData = {\r\n                searchVal : data\r\n            }\r\n\r\n            await axios.post('http://127.0.0.1:3333/hotel/search', tempData, this.appKeyHeader).then((response) => {\r\n                this.tableData = response.data\r\n            })\r\n        }, \r\n\r\n        async deleteData(data) {\r\n            await axios.delete(`http://127.0.0.1:3333/hotel/delete/${data[\"id\"]}`, this.appKeyHeader)\r\n            this.read() \r\n        },\r\n        \r\n        editData(data) {\r\n            console.log(\"workinf\");\r\n            console.log(data)\r\n            this.formData.customerId = data.customer_id\r\n            this.formData.id = data.id\r\n            this.formData.hotelName = data.hotel_name\r\n            this.formData.hotelDoorno  = data.address.doorNo\r\n            this.formData.hotelLandmark  = data.address.landMark\r\n            this.formData.hotelPincode = data.address.pincode\r\n            this.flagData.formFlag = true;\r\n            this.flagData.editForm = true;\r\n        },\r\n        sortIconFlagDisplay(flag) {\r\n            if (this.flagData.sortArrow[flag])\r\n                return \"mdi-arrow-down\";\r\n            else\r\n                return \"mdi-arrow-up\";\r\n        },\r\n        clickOut() {\r\n            this.$refs.form.reset();\r\n            this.flagData.editForm = false;\r\n            this.flagData.formFlag = false;\r\n        },\r\n    },\r\n    components: { SearchBox }\r\n}\r\n\r\n</script>"]},"metadata":{},"sourceType":"module"}